<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ultra Love Proposal ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
    font-family:Arial;
}
h1{
    position:absolute;
    top:20%;
    width:100%;
    text-align:center;
    color:white;
    font-size:60px;
    text-shadow:0 0 25px pink;
}
button{
    position:absolute;
    top:70%;
    left:50%;
    transform:translateX(-50%);
    padding:15px 35px;
    font-size:20px;
    background:pink;
    border:none;
    border-radius:10px;
    cursor:pointer;
}
</style>
</head>

<body>

<h1>Neha ‚ù§Ô∏è</h1>
<button onclick="startShow()">Start Surprise</button>

<audio id="music" src="https://cdn.pixabay.com/audio/2022/03/15/audio_5a1e8b7e61.mp3"></audio>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene,camera,renderer,teddy;
let fireworks=[];

function startShow(){
    document.querySelector("button").style.display="none";
    document.querySelector("h1").innerHTML="I Love You Neha üíñ";
    document.getElementById("music").play();
    init();
}

function init(){
    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
    camera.position.z = 12;

    renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth,window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const light = new THREE.PointLight(0xffffff,2);
    light.position.set(10,10,10);
    scene.add(light);

    const ambient = new THREE.AmbientLight(0xffffff,0.6);
    scene.add(ambient);

    createStars();
    createTeddy();
    animate();
}

// ‚≠ê galaxy
function createStars(){
    let geo = new THREE.BufferGeometry();
    let mat = new THREE.PointsMaterial({color:0xffffff});
    let arr=[];
    for(let i=0;i<1500;i++){
        arr.push((Math.random()-0.5)*200);
        arr.push((Math.random()-0.5)*200);
        arr.push((Math.random()-0.5)*200);
    }
    geo.setAttribute('position', new THREE.Float32BufferAttribute(arr,3));
    let stars = new THREE.Points(geo,mat);
    scene.add(stars);
}

// üß∏ teddy
function createTeddy(){
    const brown = new THREE.MeshStandardMaterial({color:0x8b4513});

    // body
    let body = new THREE.Mesh(new THREE.SphereGeometry(1.5),brown);
    scene.add(body);

    // head
    let head = new THREE.Mesh(new THREE.SphereGeometry(1),brown);
    head.position.y=2;
    body.add(head);

    // ears
    let ear1 = new THREE.Mesh(new THREE.SphereGeometry(0.35),brown);
    ear1.position.set(-0.7,0.8,0);
    head.add(ear1);

    let ear2 = new THREE.Mesh(new THREE.SphereGeometry(0.35),brown);
    ear2.position.set(0.7,0.8,0);
    head.add(ear2);

    teddy = body;
}

// üéÜ ultra fireworks
function createFirework(){
    let particles=[];
    let geo=new THREE.BufferGeometry();
    let mat=new THREE.PointsMaterial({
        color:Math.random()*0xffffff,
        size:0.25
    });

    for(let i=0;i<300;i++){
        particles.push(0,0,0);
    }

    geo.setAttribute('position', new THREE.Float32BufferAttribute(particles,3));
    let points=new THREE.Points(geo,mat);

    points.userData.vel=[];
    for(let i=0;i<300;i++){
        points.userData.vel.push({
            x:(Math.random()-0.5)*0.7,
            y:(Math.random()-0.5)*0.7,
            z:(Math.random()-0.5)*0.7
        });
    }

    points.position.set(
        (Math.random()-0.5)*15,
        (Math.random()-0.5)*10,
        (Math.random()-0.5)*15
    );

    scene.add(points);
    fireworks.push(points);
}

function animate(){
    requestAnimationFrame(animate);

    if(teddy){
        teddy.rotation.y +=0.03;
        teddy.position.y = Math.sin(Date.now()*0.003)*0.5;
    }

    if(Math.random()<0.08){
        createFirework();
    }

    fireworks.forEach(f=>{
        let pos=f.geometry.attributes.position.array;
        for(let i=0;i<pos.length;i+=3){
            pos[i]+=f.userData.vel[i/3].x;
            pos[i+1]+=f.userData.vel[i/3].y;
            pos[i+2]+=f.userData.vel[i/3].z;
        }
        f.geometry.attributes.position.needsUpdate=true;
    });

    renderer.render(scene,camera);
}
</script>

</body>
</html>
